---
- name: Generate OpenHASP configuration for ESP32-S3 Tion 4S
  hosts: localhost
  connection: local
  gather_facts: false
  
  vars_files:
    - config/variables.yml
  
  pre_tasks:
    - name: Validate required variables
      assert:
        that:
          - device.name is defined
          - device.name != ""
        fail_msg: "Обязательные переменные не определены"
        success_msg: "Обязательные переменные присутствуют"
  
  roles:
    - openhasp-config